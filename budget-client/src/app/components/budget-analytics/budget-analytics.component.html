<app-period-selector></app-period-selector>
<div class="after-period-selector-container">
    <div *ngIf="LoadingState !== 'loaded'" class="loading-indication-container">
        <app-loading-indication [Failed]="LoadingState === 'error'" (Retry)="Reload()"></app-loading-indication>
    </div>
    <ng-container *ngIf="LoadingState === 'loaded'">
        <mat-card class="no-margin-top">
            <app-chart-pie *ngIf="CategoryTypeAmountsChartData != undefined" [Data]="CategoryTypeAmountsChartData" [Options]="CategoryTypeAmountsChartOption" [AspectRatio]="'golden-section'"></app-chart-pie>
        </mat-card>
        <mat-card>
            <table mat-table [dataSource]="CategoryAmounts">
                <ng-container matColumnDef="Type">
                    <th mat-header-cell *matHeaderCellDef>{{ 'BudgetAnalytics.CategoryAmountsTable.Type' | translate }}</th>
                    <td mat-cell *matCellDef="let categoryAmount">{{ 'CategoryTypes.' + CategoryTypes[categoryAmount.Category.Type] | translate }}</td>
                </ng-container>

                <ng-container matColumnDef="Category">
                    <th mat-header-cell *matHeaderCellDef>{{ 'BudgetAnalytics.CategoryAmountsTable.Category' | translate }}</th>
                    <td mat-cell *matCellDef="let categoryAmount">{{ categoryAmount.Category.Name }}</td>
                </ng-container>

                <ng-container matColumnDef="Amount">
                    <th mat-header-cell *matHeaderCellDef>{{ 'BudgetAnalytics.CategoryAmountsTable.Amount' | translate }}</th>
                    <td mat-cell *matCellDef="let categoryAmount">{{ categoryAmount.Amount }} â‚¬</td>
                </ng-container>

                <ng-container matColumnDef="Ratio">
                    <th mat-header-cell *matHeaderCellDef>{{ 'BudgetAnalytics.CategoryAmountsTable.Ratio' | translate }}</th>
                    <td mat-cell *matCellDef="let categoryAmount">{{ categoryAmount.Ratio }} %</td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="CategoryAmountColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: CategoryAmountColumns;"></tr>
            </table>
        </mat-card>
    </ng-container>
</div>
